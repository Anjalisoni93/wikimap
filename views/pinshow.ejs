<%- include('partials/_header') %>
  <div class="wrapper">

      <div class="card " style="max-width: 540px;">
        <div class="row g-0">
          <div class="col-md-4">
            <img src="<%= pin.image_url %>" class="img-fluid rounded-start" alt="...">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title">
                <%=pin.title %>
              </h5>
              <p class="card-text">
                <%= pin.description %>
              </p>

            </div>
            <a href="/pins/<%=pin.id %>/edit" type="button" class="btn btn-outline-info">Edit</a>
            <form action="/pins/<%=pin.id %>?_method=DELETE" class='pinDelete' method="post">
              <button type="submit" class="btn btn-outline-danger">Delete</button>
            </form>

          </div>
          <div id="showmap">
          </div>

          <script>
            let latitude = `<%= mapDetails.latitude %>`;
            let longitude = `<%= mapDetails.longitude %>`;
            let homePage_map = L.map('showmap').setView([latitude, longitude], 13);
            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiandhbGlhIiwiYSI6ImNrejdxa21icDFkaXUyb254d3lycm1waTMifQ.EElK29xVtr-xefOmbDrrYw', {
              attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
              maxZoom: 10,
              id: 'mapbox/streets-v11',
              tileSize: 512,
              zoomOffset: -1,
              accessToken: 'pk.eyJ1IjoiandhbGlhIiwiYSI6ImNrejdxa21icDFkaXUyb254d3lycm1waTMifQ.EElK29xVtr-xefOmbDrrYw'
            }).addTo(homePage_map)

            //console.log(pins);
            //console.log(data)
            // L.marker([latitude,longitude]).addTo(homePage_map)
            let marker = L.marker(['<%-pin.latitude %>','<%- pin.longitude %>'])
              .addTo(homePage_map);

            marker.bindPopup(`<h4><%= pin.title %></h4><br><img class = "pinImage" src = "<%= pin.image_url %>"><span><%= pin.description %>..</span>`)
              .openPopup();

          </script>


        </div>


        <%- include('partials/_footer') %>
