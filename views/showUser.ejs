<%- include('partials/_header') %>
<div class="card text-center">
  <div class="card-header">
    Featured
  </div>
  <div class="card-body">
    <h5 class="card-title">hello <%= user.name %></h5>
    <p class="card-text">Maps created by you</p>
  </div>
</div>

<div class="mapcontainer">
  <% for(let map of maps){ %>
    <div class="card eachMap" style="width: 18rem;">
      <div id="userMap-<%= map.id %>" class = "userMap">

      </div>
      <script>
          L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiandhbGlhIiwiYSI6ImNrejdxa21icDFkaXUyb254d3lycm1waTMifQ.EElK29xVtr-xefOmbDrrYw', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox/streets-v11',
            tileSize: 512 ,
           zoomOffset: -1,
           accessToken: 'pk.eyJ1IjoiandhbGlhIiwiYSI6ImNrejdxa21icDFkaXUyb254d3lycm1waTMifQ.EElK29xVtr-xefOmbDrrYw'
           }).addTo(L.map("userMap-<%= map.id %>").setView([`<%= map.latitude %>`,`<%= map.longitude %>`], 13))
      </script>
     <div class="card-body">
     <p class="card-text"><%= map.title %></p>
     </div>
     <a href="/maps/<%= map.id %>" class="btn btn-outline-success">Show Details</a>
   </div>
 <% } %>
</div>
<section>
  <h6><i class="fa-solid fa-heart"></i> All Your Favorite Maps</h6>
  <table class="table favouriteTable" >
    <thead>
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
      <% for(let favourite of favourites) { %>
        <tr>
          <td><a href="/maps/<%= favourite.id %>"><%= favourite.title%></a></td>
          <td>
            <form action="favourite/<%= favourite.favouriteid%>?_method=DELETE" method="post">
            <button type="submit" class="btn btn-danger">Delete</button>
            </form>
          </td>
        </tr>
     <% } %>
    </tbody>
  </table>
</section>

<%- include('partials/_footer') %>
